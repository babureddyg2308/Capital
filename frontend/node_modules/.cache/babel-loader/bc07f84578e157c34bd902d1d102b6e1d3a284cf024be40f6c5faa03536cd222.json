{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';// import { handleError, handleSuccess } from '../utils';\nimport{handleError,handleSuccess}from'../utils';import{ToastContainer}from'react-toastify';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function Home(){const[loggedInUser,setLoggedInUser]=useState('');const[products,setProducts]=useState('');const navigate=useNavigate();useEffect(()=>{setLoggedInUser(localStorage.getItem('loggedInUser'));},[]);const handleLogout=e=>{localStorage.removeItem('token');localStorage.removeItem('loggedInUser');handleSuccess('User Loggedout');setTimeout(()=>{navigate('/login');},1000);};const fetchProducts=async()=>{try{const url=\"https://capital-2-mba5.onrender.com/products\";const headers={headers:{'Authorization':localStorage.getItem('token')}};const response=await fetch(url,headers);const result=await response.json();console.log(result);setProducts(result);}catch(err){handleError(err);}};useEffect(()=>{fetchProducts();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',textAlign:'center',justifyContent:'center',alignItems:'center',gap:'50px',marginBottom:'50px',margin:'50px'},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome \",loggedInUser]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'30px'},children:products&&(products===null||products===void 0?void 0:products.map((item,index)=>/*#__PURE__*/_jsxs(\"ul\",{style:{border:'1px solid',padding:'10px',borderRadius:'10px'},children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,style:{width:'100px',marginBottom:'10px',height:'100px'}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Name:\",item.name,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginBottom:'10px'},children:[\"Price:\",item.price]})]},index)))}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","handleError","handleSuccess","ToastContainer","jsxs","_jsxs","jsx","_jsx","Home","loggedInUser","setLoggedInUser","products","setProducts","navigate","localStorage","getItem","handleLogout","e","removeItem","setTimeout","fetchProducts","url","headers","response","fetch","result","json","console","log","err","children","style","display","textAlign","justifyContent","alignItems","gap","marginBottom","margin","onClick","flexWrap","map","item","index","border","padding","borderRadius","src","image","width","height","name","price"],"sources":["C:/Users/babur/Desktop/cptl/capitalll/Capital/frontend/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\n// import { handleError, handleSuccess } from '../utils';\r\nimport { handleError, handleSuccess } from '../utils';\r\n\r\nimport { ToastContainer } from 'react-toastify';\r\n\r\nfunction Home() {\r\n    const [loggedInUser, setLoggedInUser] = useState('');\r\n    const [products, setProducts] = useState('');\r\n    const navigate = useNavigate();\r\n    useEffect(() => {\r\n        setLoggedInUser(localStorage.getItem('loggedInUser'))\r\n    }, [])\r\n\r\n    const handleLogout = (e) => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('loggedInUser');\r\n        handleSuccess('User Loggedout');\r\n        setTimeout(() => {\r\n            navigate('/login');\r\n        }, 1000)\r\n    }\r\n\r\n    const fetchProducts = async () => {\r\n        try {\r\n            const url = \"https://capital-2-mba5.onrender.com/products\";\r\n            const headers = {\r\n                headers: {\r\n                    'Authorization': localStorage.getItem('token')\r\n                }\r\n            }\r\n            const response = await fetch(url, headers);\r\n            const result = await response.json();\r\n            console.log(result);\r\n            setProducts(result);\r\n        } catch (err) {\r\n            handleError(err);\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        fetchProducts()\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <div style={{display:'flex', textAlign:'center', justifyContent:'center',alignItems:'center', gap:'50px',marginBottom:'50px',margin:'50px'}}>\r\n            <h1>Welcome {loggedInUser}</h1>\r\n            <button onClick={handleLogout} >Logout</button>\r\n            </div>\r\n            <div style={{display:'flex', flexWrap:'wrap', gap:'30px'}}>\r\n                {\r\n                    products && products?.map((item, index) => (\r\n                        <ul key={index} style={{border:'1px solid',padding:'10px', borderRadius:'10px'}} >\r\n                            <img src={item.image} style={{width:'100px', marginBottom:'10px', height:'100px'}}/>\r\n                            <p>Name:{item.name} </p>\r\n                            <p style={{marginBottom:'10px'}}>Price:{item.price}</p>\r\n                        </ul>\r\n                    ))\r\n                }\r\n            </div>\r\n            <ToastContainer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}